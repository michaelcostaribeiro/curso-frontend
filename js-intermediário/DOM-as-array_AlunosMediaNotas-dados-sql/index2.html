<!DOCTYPE html>
  <html>
    <head>
      <!--Import Google Icon Font-->
      <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
      <!--Import materialize.css-->
      <link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/>

      <!--Let browser know website is optimized for mobile-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

      <style type="text/css">
        .underlined{
          border-bottom: 3px solid currentColor;
        }
      </style>
    </head>

    <body>

       <div class="container">

        <div class="hero center card-panel materialize-red darken-4 white-text z-depth-3">
          <h1 class="materialize-red-text text-lighten-3"> Curso Javascript Completo</h1>
          
        </div>
        <h2 class="materialize-red-text text-lighten-2 underlined">Dados de Alunos</h2>

        <table class="striped">
        <thead>
          <tr>
              <th>Nome</th>
              <th aluno-nota="n1">Nota 1</th>
              <th aluno-nota="n2">Nota 2</th>
              <th aluno-nota="n3">Nota 3</th>
              <th aluno-nota="n4">Nota 4</th>
              <th aluno-nota="media">Média</th>
              
          </tr>
        </thead>

        <tbody>
            
          </tbody>
      </table>
      </div>

      <!--JavaScript at end of body for optimized loading-->
      <!-- <script type="text/javascript" src="js/materialize.min.js"></script> -->
      <script src="js/calc.js"></script>
      <script>
        const INDICE_NOTAS = {
          n1: 1,
          n2: 2,
          n3: 3,
          n4: 4,
          media: 5
        };
        const alunos = [
                { nome: "Daniel", notas:[10,  3,   7.5,   3] },
                { nome: "Maria",  notas:[10,  9,   3,     9.5]},
                { nome: "João",   notas:[10,  4,   1,     3.5]},
                { nome: "Joana",  notas:[1,   2,   9,     1.5]},
                { nome: "José",   notas:[10,  4,   5,     7]},
                { nome: "Arnaldo",notas:[10,  4,   5,     7]},
                { nome: "Lucas",  notas:[4.5, 9,   8,     3]},
                { nome: "Luana",  notas:[3,   7,   9,     3]},
                { nome: "Beatriz",notas:[10,  4,   7,     9]},
                { nome: "Sergio", notas:[4.,  9.5, 10,    2]}
              ];
        alunos.forEach(aluno => {
          aluno.media = avarege(...aluno.notas)
        })
        
        const html = alunos.map( aluno =>`
        <tr>
            <td>${aluno.nome}</td>
            <td>${aluno.notas[0]}</td>
            <td>${aluno.notas[1]}</td>
            <td>${aluno.notas[2]}</td>
            <td>${aluno.notas[3]}</td>
            <td>${aluno.media}</td>
            </tr>
            `).join("")
            
            document.querySelector("tbody").innerHTML = html
        
              for(let i in alunos){
                 if(alunos[i].media>5){
                 document.querySelector(`tr:nth-child(${Number(i) +1})>td:last-child`).style.background = "red"
                 }
            //  for (let i in alunos) {
            //      if (alunos[i].media > 7) { // Access media correctly
            //          document.querySelector(`tr:nth-child(${Number(i) + 1}) > td:last-child`).style.background = "red";
            // }
            }
      </script>

    </body>
  </html>